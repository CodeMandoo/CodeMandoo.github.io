<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
    <!-- <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script> -->
    <!-- <script src="https://ar.cnxfs.com.cn/aframe-ar-nft.js"></script> -->
    <!-- <script type='text/javascript' src="./js/aframe.min.js"></script> -->
    <!-- <script type='text/javascript' src='./js/ar-threex-location-only.js'></script> -->
    <!-- <script type='text/javascript' src="./js/aframe-ar.js"></script> -->
    <!-- <script src="https://ar.cnxfs.com.cn/aframe-ar-nft.js"></script> -->
    <script src="./origin/aframe.min.js"></script>
    <script type='text/javascript' src='./origin/ar-threex-location-only.js'></script>
    <script type='text/javascript' src='./origin/aframe-ar.js'></script>
</head>

<body>
    <!-- <a-scene vr-mode-ui='enabled: false' arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false'
        renderer='antialias: true; alpha: true'>
        <a-camera gps-new-camera='gpsMinDistance: 5'></a-camera> -->
    <!-- <a-entity material='color: red' geometry='primitive: box'
            gps-new-entity-place="latitude: 40.00953; longitude: 116.81509" scale="10 10 10"></a-entity>
        <a-entity material='color: green' geometry='primitive: box'
            gps-new-entity-place="latitude: 40.00956; longitude: 116.81511" scale="10 10 10"></a-entity> -->
    <!-- </a-scene> -->
    <a-scene arjs='sourceType: webcam;'>
        <a-camera gps-new-camera></a-camera>
        <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"
            gps-new-entity-place="latitude: 40.008259; longitude: 116.8090"></a-box>
        <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
        <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
        <a-sky color="#ECECEC"></a-sky>
    </a-scene>
    <!-- <a-scene vr-mode-ui='enabled: false' arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false'
        renderer='antialias: true; alpha: true'>
        <a-entity material='color: red' geometry='primitive: box'
            gps-new-entity-place="latitude: 40.00953; longitude: 116.81509" scale="10 10 10"></a-entity>
        <a-text value="This content will always face you." look-at="[gps-new-camera]" scale="120 120 120"
            gps-new-entity-place="latitude: 40.00953; longitude: 116.81509;"></a-text>
        <a-box material="color: yellow" gps-new-entity-place="latitude: 40.00953; longitude: 116.81509"></a-box>
        <a-box material="color: blue" gps-new-entity-place="latitude: 40.00952; longitude: 116.81511"></a-box>
        <a-camera gps-new-camera='gpsMinDistance: 5'></a-camera>
    </a-scene> -->

</body>

<script>
    window.onload = () => {
        let testEntityAdded = false;

        const el = document.querySelector("[gps-new-camera]");

        el.addEventListener("gps-camera-update-position", e => {
            if (!testEntityAdded) {
                alert(`Got first GPS position: lon ${e.detail.position.longitude} lat ${e.detail.position.latitude}`);
                // Add a box to the north of the initial GPS position
                const entity = document.createElement("a-box");
                entity.setAttribute("scale", {
                    x: 20,
                    y: 20,
                    z: 20
                });
                entity.setAttribute('material', { color: 'red' });
                entity.setAttribute('gps-new-entity-place', {
                    latitude: e.detail.position.latitude + 0.001,
                    longitude: e.detail.position.longitude
                });
                document.querySelector("a-scene").appendChild(entity);
            }
            testEntityAdded = true;
        });
    };
</script>

</html>